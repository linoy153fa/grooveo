(this.webpackJsonplooper=this.webpackJsonplooper||[]).push([[0],{43:function(e){e.exports=JSON.parse('[{"_id":"1","title":"Funk Beatskkkkkk","isChecked":false,"isPlaying":false},{"_id":"2","title":"Stutter Break beats","isChecked":false,"isPlaying":false},{"_id":"3","title":"Funk Groove","isChecked":false,"isPlaying":false},{"_id":"4","title":"Electric Guitar","isChecked":false,"isPlaying":false},{"_id":"5","title":"Stompy Slosh Beat","isChecked":false,"isPlaying":false},{"_id":"6","title":"Groove Tanggu","isChecked":false,"isPlaying":false},{"_id":"7","title":"Maze Politics","isChecked":false,"isPlaying":false},{"_id":"8","title":"Groove","isChecked":false,"isPlaying":false},{"_id":"9","title":"Silent Star ","isChecked":false,"isPlaying":false}]')},59:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(18),c=n.n(r),i=n(47),s=n(17),u=n(24),o=n(42),d=n(3),p={isLoading:!1,isPlaying:!1};var l=n(33),f={pads:[]};var b=Object(u.b)({playerSettingsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1});case"TOGGLE":return Object(d.a)(Object(d.a)({},e),{},{isPlaying:t.isPlaying});case"LOOP_ENDED":return Object(d.a)(Object(d.a)({},e),{},{isloopEnded:!0});case"NEW_LOOP_STATRED":return Object(d.a)(Object(d.a)({},e),{},{isloopEnded:!1});default:return e}},padReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PADS":return Object(d.a)(Object(d.a)({},e),{},{pads:t.pads});case"SET_PAD":return Object(d.a)(Object(d.a)({},e),{},{currPad:t.pad});case"RESET_PAD":return Object(d.a)(Object(d.a)({},e),{},{currPad:null});case"UPDATE_PAD":return Object(d.a)(Object(d.a)({},e),{},{pads:[t.pad].concat(Object(l.a)(e.pads.filter((function(e){return t.pad._id!==e._id}))))});default:return e}}}),j=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,O=Object(u.d)(b,j(Object(u.a)(o.a))),h=(n(59),n(2)),v=n.n(h),g=n(6),y=n(21),m=(n(61),n(62),n.p+"static/media/1.5eb417fc.mp3"),x=n.p+"static/media/2.37c82282.mp3",k=n.p+"static/media/3.52c24c81.mp3",_=n.p+"static/media/4.230fcab8.mp3",P=n.p+"static/media/5.27bdc145.mp3",E=n.p+"static/media/6.3e1411b4.mp3",w=n.p+"static/media/7.2d08c654.mp3",S=n.p+"static/media/8.f77c6da4.mp3",D=n.p+"static/media/9.f2d668af.mp3",N=[m,x,k,_,P,E,w,S,D],A={getAudio:C,makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}};function C(e){return e<=0?m:N[e-1]}var T={query:I,get:function(e,t){return L.apply(this,arguments)},post:function(e,t){return G.apply(this,arguments)},put:function(e,t){return R.apply(this,arguments)},remove:function(e,t){return W.apply(this,arguments)}};function I(e,t){var n=JSON.parse(localStorage.getItem(e))||Object(l.a)(t);return B(e,n),Promise.resolve(n)}function L(){return(L=Object(g.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:return a=e.sent,e.abrupt("return",a.find((function(e){return e._id===n})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(g.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._id=A.makeId(),e.next=3,I(t,[]);case 3:return(a=e.sent).unshift(n),B(t,a),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(g.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:return a=e.sent,r=a.findIndex((function(e){return e._id===n._id})),a.splice(r,1,n),B(t,a),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(g.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:a=e.sent,r=a.findIndex((function(e){return e._id===n})),a.splice(r,1),B(t,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t){localStorage.setItem(e,JSON.stringify(t))}var J=n(43),M="MUSIC",q={query:function(){return U.apply(this,arguments)},getById:function(e){return F.apply(this,arguments)},remove:function(e){return X.apply(this,arguments)},save:function(e){return z.apply(this,arguments)}};function U(){return(U=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.query(M,J);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return e.abrupt("return",e.t0);case 9:throw e.prev=9,e.t1=e.catch(0),console.log(e.t1,"err"),e.t1;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function F(){return(F=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get(M,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.remove(M,t);case 2:return e.abrupt("return",Promise.resolve());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=6;break}return e.next=3,T.put(M,t);case 3:case 8:return e.abrupt("return",e.sent);case 6:return e.next=8,T.post(M,t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){var t=e._id?"UPDATE_PAD":"ADD_PAD";return function(){var n=Object(g.a)(v.a.mark((function n(a){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,q.save(e);case 3:a({type:t,pad:e}),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.log("saved padd fail",n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()}function Y(e){return function(){var t=Object(g.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n({type:"TOGGLE",isPlaying:e})}catch(a){console.log("toggle fail",a)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var H=n(87),K=(n(63),n(5));function Q(e){var t=e.id,n=e.isWaiting,r=e.updateWaiting,c=e.updateEnding,i=Object(s.b)(),u=Object(s.c)((function(e){return e.playerSettingsReducer})).isPlaying,o=Object(a.useState)(null),p=Object(y.a)(o,2),l=p[0],f=p[1],b=Object(a.useState)(!1),j=Object(y.a)(b,2),O=j[0],h=j[1],m=Object(a.useRef)();Object(a.useEffect)(Object(g.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.getById(t);case 2:return n=e.sent,f(n),e.abrupt("return",(function(){i(Y(!1))}));case 5:case"end":return e.stop()}}),e)}))),[]),Object(a.useEffect)((function(){l&&h(l.isChecked)}),[null===l||void 0===l?void 0:l.isChecked]),Object(a.useEffect)((function(){(null===l||void 0===l?void 0:l.isChecked)&&!u&&i(V(Object(d.a)(Object(d.a)({},l),{},{isPlaying:!0}))),l&&x()}),[null===l||void 0===l?void 0:l.isChecked,u,null===l||void 0===l?void 0:l.isPlaying]);var x=function(){O&&u?(m.current.play(),i(V(Object(d.a)(Object(d.a)({},l),{},{isPlaying:!0})))):u||(m.current.pause(),i(V(Object(d.a)(Object(d.a)({},l),{},{isPlaying:!1,isWaiting:!1}))))};return l?Object(K.jsxs)("div",{className:"pad-preview col",children:[Object(K.jsx)("h2",{className:"title",children:l.title}),Object(K.jsxs)("div",{className:"toggle-container",children:[Object(K.jsx)("audio",{ref:m,src:C(+t),onEnded:function(){n&&u&&c(!0),u&&m.current.play()}}),Object(K.jsx)(H.a,{checked:O,onChange:function(e){var t=e.target.checked;h(t);var n=Object(d.a)(Object(d.a)({},l),{},{isChecked:t,isWaiting:u});i(V(n)),t&&u&&r(l._id)},name:"isChecked",inputProps:{"aria-label":"secondary checkbox"}})]})]}):Object(K.jsx)("div",{children:"...wait"})}function Z(e){var t=e.pads,n=e.isWaiting,a=e.updateWaiting,r=e.updateEnding,c=e.isEnded;return Object(K.jsx)("div",{className:"pad-list flex justify-center",children:Object(K.jsx)("div",{className:"grid-list grid",children:t.sort((function(e,t){return e._id>t._id?1:-1})).map((function(e){return Object(K.jsx)(Q,{id:e._id,isWaiting:n,updateWaiting:a,updateEnding:r,isEnded:c},e._id)}))})})}var $=n(44),ee=n.n($),te=n(45),ne=n.n(te);function ae(){var e=Object(a.useState)(!1),t=Object(y.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),i=Object(y.a)(c,2),u=i[0],o=i[1],p=Object(s.c)((function(e){return e.padReducer.pads})),l=Object(a.useState)(!1),f=Object(y.a)(l,2),b=f[0],j=f[1],O=Object(s.c)((function(e){return e.playerSettingsReducer.isLoading})),h=Object(s.b)();Object(a.useEffect)((function(){h(function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),e.next=4,q.query();case 4:n=e.sent,t({type:"SET_PADS",pads:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("load pads fail",e.t0);case 11:return e.prev=11,t({type:"LOADING_DONE"}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}())}),[]);return O?Object(K.jsx)("div",{children:"Loading..."}):Object(K.jsxs)("div",{className:"home",children:[Object(K.jsx)("h1",{className:"main-title",children:"PLAY!"}),Object(K.jsx)(Z,{pads:p,isWaiting:n,updateWaiting:function(e){r(!0);var t=function(){var t=Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.getById(e);case 2:n=t.sent,o(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()},updateEnding:function(){j(!0),u&&h(V(Object(d.a)(Object(d.a)({},u),{},{isPlaying:!0})))},isEndedProp:b}),Object(K.jsxs)("div",{className:"btns",children:[Object(K.jsx)(ee.a,{className:"icon",onClick:function(){r(!1),h(Y(!0))}}),Object(K.jsx)(ne.a,{className:"icon",onClick:function(e){e.preventDefault(),h(Y(!1)),r(!1)}})]})]})}var re=function(){return Object(K.jsx)(ae,{})};c.a.render(Object(K.jsx)(s.a,{store:O,children:Object(K.jsx)(i.a,{children:Object(K.jsx)(re,{})})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.ce1dfa39.chunk.js.map